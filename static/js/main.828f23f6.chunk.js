(this.webpackJsonpdrcreview=this.webpackJsonpdrcreview||[]).push([[0],{108:function(e,t){},110:function(e,t){},121:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(29),c=n.n(a),s=n(10),o=n(95),r=n(81),l=n(39),u=n(97),d=n(21),f=n(23),j=n(24),h=n(91),y=n(35),p=n(53),b=n(48),x=n(52),O=n(1);var v=function(e){return Object(O.jsxs)(b.a,{gap:2,className:"mx-auto",children:[Object(O.jsx)(x.b,{onDrop:function(t){return m(t,e.onActsFileLoad,e.onActsFileError)},onError:e.onActsFileError,addRemoveButton:!0,onRemoveFile:e.onRemoveActsFile,accept:"text/acts, .acts, application/drc",config:{delimiter:" ",dynamicTyping:!0,skipEmptyLines:!1},children:Object(O.jsxs)("span",{children:["Drop DRC ",Object(O.jsx)("code",{children:".acts"})," file here or click to load."]})}),Object(O.jsx)(l.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsx)(y.a,{md:"auto",className:"text-secondary",children:"or"})})}),Object(O.jsx)(l.a,{children:Object(O.jsx)(p.a,{className:"justify-content-md-center",children:Object(O.jsx)(y.a,{md:"auto",children:Object(O.jsx)(h.a,{variant:"secondary",onClick:function(){return t=e.onActsFileLoad,n=e.onActsFileError,void Object(x.c)("/DRCReView/bork.acts",{delimiter:" ",dynamicTyping:!0,skipEmptyLines:!1,complete:function(e){return m(e.data,t,n)},error:function(e){return n(e)}});var t,n},children:"Load Example Data"})})})})]})};function m(e,t,n){var i={namingThreshold:void 0,maxCycle:0,layers:[],layerPositions:{},units:{},activations:[],gpcActivity:[],totals:[]},a=!1;e.every((function(e,t){var c="[object Array]"===Object.prototype.toString.call(e)?e:e.data;if(null===c||c.every((function(e){return null===e})))return!0;if("string"!==typeof c[0]||"#"!==c[0]&&";"!==c[0])if("string"===typeof c[0]&&c[0].startsWith("Cycle")&&"string"===typeof c[1]&&"GPCRoute"===c[1])!function(e,t,n){var i=parseInt(t[0].substring(5));e.gpcActivity[i]=t.slice(2).join(" ")}(i,c);else if("string"===typeof c[0]&&c[0].startsWith("Cycle"))!function(e,t,n){var i=parseInt(t[0].substring(5)),a=t[1],c=t[2],s=t[3],o=1;if(a.startsWith("VF"))return;i>e.maxCycle&&(e.maxCycle=i);var r=a.search(/\d/);-1!==r&&(o=parseInt(a.substring(r)),a=a.substring(0,r));e.layers.includes(a)||e.layers.push(a);"undefined"===typeof e.layerPositions[a]&&(e.layerPositions[a]=[]);e.layerPositions[a].includes(o)||e.layerPositions[a].push(o);"undefined"===typeof e.activations[a]&&(e.activations[a]={});"undefined"===typeof e.activations[a][i]&&(e.activations[a][i]=[]);"undefined"===typeof e.activations[a][i][o]&&(e.activations[a][i][o]={});e.activations[a][i][o][s]=c,"undefined"===typeof e.units[a]&&(e.units[a]=[]);"undefined"===typeof e.units[a][o]&&(e.units[a][o]=[]);e.units[a][o].includes(s)||e.units[a][o].push(s)}(i,c);else{if("string"!==typeof c[0]||!c[0].startsWith("T")||"string"!==typeof c[1]||!c[1].startsWith("Cycle"))return function(e,t){console.error("Line "+(t+1)+" not handled: "+e.join(" "))}(c,t),n({row:t,message:"line format not recognised"}),a=!0,!1;!function(e,t,n){var i=t[0].substring(1),a=parseInt(t[1].substring(5)),c=t[2];if("VF"===i)return;"O"===i&&(i="Orth");"P"===i&&(i="Phon");"Ph"===i&&(i="P");e.layers.includes(i)||e.layers.push(i);"undefined"===typeof e.totals[a]&&(e.totals[a]={});e.totals[a][i]=c,a>e.maxCycle&&(e.maxCycle=a)}(i,c)}else!function(e,t,n){"Naming"===t[1]&&"threshold:"===t[2]&&"number"===typeof t[3]&&(e.namingThreshold=t[3])}(i,c);return!0})),a?t():(!function(e){if("undefined"!==typeof e.layerPositions)for(var t in e.layerPositions)e.layerPositions[t].sort((function(e,t){return e-t}));if("undefined"!==typeof e.units)for(var n in e.units)for(var i in e.units[n])e.units[n][i].sort()}(i),t(i))}var P=n(92);var g=function(e){return Object(O.jsxs)(b.a,{gap:1,children:[Object(O.jsx)("div",{children:Object(O.jsxs)(x.a,{filename:e.title,className:"float-end btn btn-primary",type:"button",data:e.data,children:[Object(O.jsx)(f.a,{icon:j.d})," ",Object(O.jsx)(f.a,{icon:j.e})]})}),Object(O.jsxs)(P.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0,children:[Object(O.jsx)("thead",{children:Object(O.jsx)("tr",{children:e.data[0].map((function(e,t){var n="heading_"+t;return Object(O.jsx)("th",{children:e},n)}))})}),Object(O.jsx)("tbody",{children:Object.keys(e.data).map((function(t,n){if(0===n)return null;var i="row_"+n;return Object(O.jsx)("tr",{children:e.data[t].map((function(e,t){var n="value_"+t;return Object(O.jsx)("td",{align:isNaN(e)?"left":"right",children:e},n)}))},i)}))})]})]})},C=n(96);var E=function(e){return Object(O.jsx)(O.Fragment,{children:e.data?Object(O.jsx)(d.a.Container,{defaultActiveKey:L(e.data),children:Object(O.jsxs)(p.a,{children:[Object(O.jsx)(y.a,{className:"bg-light",sm:3,children:Object(O.jsxs)(C.a,{variant:"pills",className:"flex-column",children:["undefined"!==typeof e.data.layerPositions.L?Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"letter",children:"Letter Layer"})}):null,"undefined"!==typeof e.data.layerPositions.Orth?Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"orth",children:"Orthographic Lexicon"})}):null,"undefined"!==typeof e.data.layerPositions.Phon?Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"phon",children:"Phonological Lexicon"})}):null,"undefined"!==typeof e.data.layerPositions.Sem?Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"sem",children:"Semantic System"})}):null,"undefined"!==typeof e.data.layerPositions.GPC||"undefined"!==typeof e.data.layerPositions.GPCR?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"gpc",children:"GPC Route"})}),Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"gpcactivity",children:"GPC Activity"})})]}):null,"undefined"!==typeof e.data.layerPositions.P?Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"phoneme",children:"Phoneme Layer"})}):null,"undefined"!==typeof e.data.totals?Object(O.jsx)(C.a.Item,{children:Object(O.jsx)(C.a.Link,{eventKey:"totals",children:"Totals"})}):null]})}),Object(O.jsx)(y.a,{sm:9,children:Object(O.jsxs)(d.a.Content,{children:["undefined"!==typeof e.data.layerPositions.L?Object(O.jsx)(d.a.Pane,{eventKey:"letter",children:Object(O.jsx)(g,{title:"Letter",data:k("L",e.data)})}):null,"undefined"!==typeof e.data.layerPositions.Orth?Object(O.jsx)(d.a.Pane,{eventKey:"orth",children:Object(O.jsx)(g,{title:"Orthographic Lexicon",data:k("Orth",e.data)})}):null,"undefined"!==typeof e.data.layerPositions.Phon?Object(O.jsx)(d.a.Pane,{eventKey:"phon",children:Object(O.jsx)(g,{title:"Phonological Lexicon",data:k("Phon",e.data)})}):null,"undefined"!==typeof e.data.layerPositions.Sem?Object(O.jsx)(d.a.Pane,{eventKey:"sem",children:Object(O.jsx)(g,{title:"Semantic System",data:k("Sem",e.data)})}):null,"undefined"!==typeof e.data.layerPositions.GPC||"undefined"!==typeof e.data.layerPositions.GPCR?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(d.a.Pane,{eventKey:"gpc",children:Object(O.jsx)(g,{title:"GPC Route",data:D(e.data)})}),Object(O.jsx)(d.a.Pane,{eventKey:"gpcactivity",children:Object(O.jsx)(g,{title:"GPC Activity",data:R(e.data)})})]}):null,"undefined"!==typeof e.data.layerPositions.P?Object(O.jsx)(d.a.Pane,{eventKey:"phoneme",children:Object(O.jsx)(g,{title:"Phoneme",data:k("P",e.data)})}):null,"undefined"!==typeof e.data.totals?Object(O.jsx)(d.a.Pane,{eventKey:"totals",children:Object(O.jsx)(g,{title:"Totals",data:G(e.data)})}):null]})})]})}):null})};function L(e){return"undefined"!==typeof e.layerPositions.L?"letter":"undefined"!==typeof e.layerPositions.Orth?"orth":"undefined"!==typeof e.layerPositions.Phon?"phon":"undefined"!==typeof e.layerPositions.Sem?"sem":"undefined"!==typeof e.layerPositions.GPC||"undefined"!==typeof e.layerPositions.GPCR?"gpc":"undefined"!==typeof e.layerPositions.P?"phoneme":"undefined"!==typeof e.totals?"totals":void 0}function k(e,t){var n=["Orth","Phon","Sem"],i=[],a=[];return a.push("Cycle"),t.layerPositions[e].forEach((function(i){t.units[e][i].forEach((function(c){var s=1===Object.keys(t.layerPositions[e]).length&&1===t.layerPositions[e][0]&&n.includes(e)?c:e+i+" "+c;a.push(s)}))})),i.push(a),Object.keys(t.activations[e]).forEach((function(n){var a=[];a.push(n),t.layerPositions[e].forEach((function(i){t.units[e][i].forEach((function(c){"undefined"===typeof t.activations[e][n][i]?a.push(void 0):a.push(t.activations[e][n][i][c])}))})),i.push(a)})),i}function D(e){var t=["GPC","GPCR"],n=[],i=[];i.push("Cycle");var a=[];t.forEach((function(t){e.layerPositions[t].forEach((function(e){a.includes(e)||a.push(e)}))})),a.sort((function(e,t){return e-t})),a.forEach((function(n){t.forEach((function(t){"undefined"!==typeof e.units[t]&&"undefined"!==typeof e.units[t][n]&&e.units[t][n].forEach((function(e){var a=t+n+" "+e;i.push(a)}))}))})),n.push(i);var c=[];return t.forEach((function(t){Object.keys(e.activations[t]).forEach((function(e){c.includes(e)||c.push(e)}))})),c.sort((function(e,t){return e-t})),c.forEach((function(i){var c=[];c.push(i),a.forEach((function(n){t.forEach((function(t){"undefined"!==typeof e.units[t]&&"undefined"!==typeof e.units[t][n]&&e.units[t][n].forEach((function(a){"undefined"===typeof e.activations[t][i]||"undefined"===typeof e.activations[t][i][n]||"undefined"===typeof e.activations[t][i][n][a]?c.push(void 0):c.push(e.activations[t][i][n][a])}))}))})),n.push(c)})),n}function R(e){var t=[],n=[];n.push("Begin"),n.push("End"),n.push("GPC Route Input"),n.push("GPC Rules"),n.push("Body-Rime"),t.push(n);var i="",a=-1,c=1;return Object.keys(e.gpcActivity).forEach((function(n){var s=e.gpcActivity[n];s!==i&&(""!==i&&t.push(S(c,a,i)),i=s,c=n),a=n})),""!==i&&t.push(S(c,a,i)),t}function S(e,t,n){var i=[];i.push(e),i.push(t);var a=n.split(" ");return i.push(a[0]),n.endsWith("}")?(i.push(a.splice(1,a.length-2).join(" ")),i.push(a.splice(-1)[0].slice(1,-1))):(i.push(a.splice(1).join(" ")),i.push(void 0)),i}function G(e){var t={L:"Letter",Orth:"Orthographic Lexicon",Phon:"Phonological Lexicon",Sem:"Semantic System",GPC:"GPC Rules",GPCR:"GPC Rime",P:"Phoneme"},n=[],i=[];return i.push("Cycle"),Object.keys(t).forEach((function(n){e.layers.includes(n)&&i.push(t[n])})),n.push(i),Object.keys(e.totals).forEach((function(i){var a=[i];Object.keys(t).forEach((function(t){"undefined"===typeof e.totals[i][t]?a.push(void 0):a.push(e.totals[i][t])})),n.push(a)})),n}var A=n(17),K=n(94);A.e.register(A.d,A.i,A.b,A.n,A.o,A.g);var I=function(e){var t={responsive:!0,maintainAspectRatio:!1,layout:{padding:0},plugins:{legend:{display:!1},title:{display:!0,text:e.title,align:"start",font:{size:8},padding:{top:0,bottom:8,left:10,right:10}}},scales:{y:{display:!0,beginAtZero:!0,min:0,max:1}}},n={labels:e.columns,datasets:[{label:"Activation",data:e.values,backgroundColor:e.barColour}]};return Object(O.jsx)("div",{style:{height:"12vh",width:"100%"},children:Object(O.jsx)(K.a,{options:t,data:n})})},F=n(126),N=n(127);var w=function(e){return Object(O.jsx)(r.a,{fixed:"bottom",variant:"dark",bg:"dark",children:Object(O.jsxs)(l.a,{children:[Object(O.jsxs)(F.a,{size:"sm",children:[Object(O.jsx)(h.a,{onClick:function(){return e.setCycle(1)},disabled:1===e.cycle,children:Object(O.jsx)(f.a,{icon:j.h})}),Object(O.jsx)(h.a,{onClick:function(){return e.playClicked()},children:e.playing?Object(O.jsx)(f.a,{icon:j.f}):Object(O.jsx)(f.a,{icon:j.g})}),Object(O.jsx)(h.a,{onClick:function(){return e.setCycle(e.maxCycle)},disabled:e.cycle===e.maxCycle,children:Object(O.jsx)(f.a,{icon:j.i})})]}),"\xa0",Object(O.jsxs)(F.a,{size:"sm",children:[Object(O.jsx)(h.a,{onClick:function(){return e.setCycle(e.cycle-1)},disabled:1===e.cycle,children:Object(O.jsx)(f.a,{icon:j.a})}),Object(O.jsx)(h.a,{onClick:function(){return e.setCycle(e.cycle+1)},disabled:e.cycle===e.maxCycle,children:Object(O.jsx)(f.a,{icon:j.b})})]}),"\xa0",Object(O.jsx)(r.a.Text,{className:"text-light",children:1}),"\xa0",Object(O.jsx)(N.a.Range,{min:"1",max:e.maxCycle,step:"1",value:e.cycle,onChange:function(t){return e.setCycle(parseInt(t.target.value))}}),"\xa0",Object(O.jsx)(r.a.Text,{className:"text-light",children:e.maxCycle})]})})};var T=function(e){var t=Object(i.useState)(1),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(i.useState)(!1),r=Object(s.a)(o,2),l=r[0],u=r[1],d=Object(i.useState)(0),f=Object(s.a)(d,2),j=f[0],h=f[1];Object(i.useEffect)((function(){l&&a>=e.maxCycle&&(u(!1),clearInterval(j),h(0),c(e.maxCycle))}),[l,e.maxCycle,a,j]);var y=function(t){t>e.maxCycle?t=e.maxCycle:t<1&&(t=1),c(t)};return Object(O.jsxs)(O.Fragment,{children:[e.actsData?Object(O.jsxs)(b.a,{gap:0,children:[Object(O.jsxs)("div",{style:{fontSize:10},className:"text-end",children:["Cycle ",a]}),"undefined"!==typeof e.actsData.layerPositions.L?Object(O.jsx)(I,{title:"Letter Layer",columns:W("L",e.actsData),values:z("L",a,e.actsData),barColour:"#003f5c"}):null,"undefined"!==typeof e.actsData.layerPositions.Orth?Object(O.jsx)(I,{title:"Orthographic Input Lexicon",columns:W("Orth",e.actsData),values:z("Orth",a,e.actsData),barColour:"#444e86"}):null,"undefined"!==typeof e.actsData.layerPositions.Phon?Object(O.jsx)(I,{title:"Phonological Output Lexicon",columns:W("Phon",e.actsData),values:z("Phon",a,e.actsData),barColour:"#955196"}):null,"undefined"!==typeof e.actsData.layerPositions.Sem?Object(O.jsx)(I,{title:"Semantic System",columns:W("Sem",e.actsData),values:z("Sem",a,e.actsData),barColour:"#dd5182"}):null,"undefined"!==typeof e.actsData.layerPositions.GPC||"undefined"!==typeof e.actsData.layerPositions.GPCR?Object(O.jsx)(I,{title:"GPC Route"+_(a,e.actsData),columns:B(e.actsData),values:V(a,e.actsData),barColour:"#ff6e54"}):null,"undefined"!==typeof e.actsData.layerPositions.P?Object(O.jsx)(I,{title:"Phoneme Layer",columns:W("P",e.actsData),values:z("P",a,e.actsData),barColour:"#ffa600"}):null]}):null,Object(O.jsx)(w,{maxCycle:e.maxCycle,cycle:a,playing:l,setCycle:function(e){return y(e)},playClicked:function(){if(j)return u(!1),clearInterval(j),void h(0);var t=setInterval((function(){c((function(e){return e+1}))}),100);h(t),u(!0),a>=e.maxCycle&&c(1)}})]})};function W(e,t){var n=["Orth","Phon","Sem"],i=[];return t.layerPositions[e].forEach((function(a){t.units[e][a].forEach((function(c){var s=1===Object.keys(t.layerPositions[e]).length&&1===t.layerPositions[e][0]&&n.includes(e)?c:e+a+" "+c;i.push(s)}))})),i}function z(e,t,n){var i=[];return n.layerPositions[e].forEach((function(a){n.units[e][a].forEach((function(c){"undefined"===typeof n.activations[e][t]||"undefined"===typeof n.activations[e][t][a]?i.push(void 0):i.push(n.activations[e][t][a][c])}))})),i}function B(e){var t=["GPC","GPCR"],n=[],i=[];return t.forEach((function(t){e.layerPositions[t].forEach((function(e){i.includes(e)||i.push(e)}))})),i.sort((function(e,t){return e-t})),i.forEach((function(i){t.forEach((function(t){"undefined"!==typeof e.units[t]&&"undefined"!==typeof e.units[t][i]&&e.units[t][i].forEach((function(e){var a=t+i+" "+e;n.push(a)}))}))})),n}function V(e,t){var n=["GPC","GPCR"],i=[],a=[];return n.forEach((function(e){t.layerPositions[e].forEach((function(e){a.includes(e)||a.push(e)}))})),a.sort((function(e,t){return e-t})),a.forEach((function(a){n.forEach((function(n){"undefined"!==typeof t.units[n]&&"undefined"!==typeof t.units[n][a]&&t.units[n][a].forEach((function(c){"undefined"===typeof t.activations[n][e]||"undefined"===typeof t.activations[n][e][a]||"undefined"===typeof t.activations[n][e][a][c]?i.push(void 0):i.push(t.activations[n][e][a][c])}))}))})),i}function _(e,t){return"undefined"===typeof t.gpcActivity[e]?"":"    "+t.gpcActivity[e]}n(121);var J=function(){var e=Object(i.useState)("load"),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(""),h=Object(s.a)(c,2),y=h[0],p=h[1],b=Object(i.useState)(),x=Object(s.a)(b,2),m=x[0],P=x[1],g=function(){p("")};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(r.a,{bg:"primary",variant:"dark",children:Object(O.jsx)(l.a,{children:Object(O.jsx)(r.a.Brand,{children:"DRCReView"})})}),Object(O.jsxs)(l.a,{className:"p-3",children:[""!==y?Object(O.jsx)(o.a,{variant:"danger",onClose:function(){return g()},dismissible:!0,children:y}):null,Object(O.jsxs)(u.a,{activeKey:n,onSelect:function(e){return a(e)},className:"mb-1",children:[Object(O.jsx)(d.a,{eventKey:"load",title:Object(O.jsx)(f.a,{icon:j.k}),children:Object(O.jsx)(l.a,{className:"p-2 mb-4 rounded-3",children:Object(O.jsx)(v,{onActsFileLoad:function(e){e&&g(),P(e),a(e?"tables":"load")},onActsFileError:function(e,t,n,i){if(null!==e&&void 0!==e){var a="";"undefined"!==typeof e.row&&(a+="Error on line #"+e.row+("undefined"!==typeof e.message?": ":"")),"undefined"!==typeof e.message&&(a+=e.message),p(a)}},onRemoveActsFile:function(){P(),g(),a("load")}})})}),Object(O.jsx)(d.a,{eventKey:"tables",title:Object(O.jsx)(f.a,{icon:j.j}),disabled:!m,children:Object(O.jsx)(E,{data:m})}),Object(O.jsx)(d.a,{eventKey:"columngraphs",title:Object(O.jsx)(f.a,{icon:j.c}),disabled:!m,children:Object(O.jsx)(T,{actsData:m,maxCycle:m?m.maxCycle:1})})]})]})]})};n(122);c.a.render(Object(O.jsx)(J,{}),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.828f23f6.chunk.js.map